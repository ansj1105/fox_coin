openapi: 3.0.0
info:
  title: Foxya Coin Service API
  description: 멀티체인 암호화폐 지갑 관리 및 레퍼럴 시스템 API
  version: 1.0.0
  contact:
    name: Foxya Team

servers:
  - url: /
    description: Current Server (Auto-detect)

tags:
  - name: System
    description: 시스템 관련 API
  - name: Auth
    description: 인증 관련 API
  - name: User
    description: 사용자 관련 API
  - name: Referral
    description: 레퍼럴 관련 API
  - name: Wallet
    description: 지갑 관련 API
  - name: Transfer
    description: 전송 관련 API
  - name: Bonus
    description: 보너스 채굴 효율 관련 API
  - name: Mining
    description: 채굴 관련 API
  - name: Level
    description: 레벨 관련 API
  - name: Notice
    description: 공지사항 관련 API
  - name: Subscription
    description: 프리미엄 구독 관련 API
  - name: Review
    description: 리뷰 관련 API
  - name: Agency
    description: 에이전시 관련 API
  - name: Ranking
    description: 랭킹 관련 API
  - name: Banner
    description: 배너 광고 관련 API

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      
  schemas:
    ApiResponse:
      type: object
      properties:
        status:
          type: string
          enum: [OK, ERROR]
        message:
          type: string
        data:
          type: object
        code:
          type: integer
          
    Error:
      type: object
      properties:
        status:
          type: string
          example: ERROR
        message:
          type: string
        code:
          type: integer

    # User 관련 스키마
    User:
      type: object
      properties:
        id:
          type: integer
          format: int64
        loginId:
          type: string
        referralCode:
          type: string
        status:
          type: string
          enum: [ACTIVE, INACTIVE, BLOCKED]
        role:
          type: string
          enum: [USER, ADMIN]
        createdAt:
          type: string
          format: date-time

    # Wallet 관련 스키마
    Wallet:
      type: object
      properties:
        id:
          type: integer
          format: int64
        userId:
          type: integer
          format: int64
        currencyId:
          type: integer
          format: int64
        address:
          type: string
        balance:
          type: number
          format: decimal
        status:
          type: string
          enum: [ACTIVE, INACTIVE, FROZEN]
        createdAt:
          type: string
          format: date-time

    # Transfer 관련 스키마
    InternalTransferRequest:
      type: object
      required:
        - receiverType
        - receiverValue
        - currencyCode
        - amount
      properties:
        receiverType:
          type: string
          enum: [ADDRESS, REFERRAL_CODE, USER_ID]
          description: 수신자 식별 유형
        receiverValue:
          type: string
          description: 수신자 식별 값 (지갑주소/추천인코드/유저ID)
        currencyCode:
          type: string
          description: 통화 코드
          example: FOXYA
        amount:
          type: number
          format: decimal
          description: 전송 금액
          example: 100.00
        memo:
          type: string
          description: 메모 (선택)
          maxLength: 255

    ExternalTransferRequest:
      type: object
      required:
        - toAddress
        - currencyCode
        - amount
        - chain
      properties:
        toAddress:
          type: string
          description: 외부 지갑 주소
          example: TXYZabc123...
        currencyCode:
          type: string
          description: 통화 코드
          example: FOXYA
        amount:
          type: number
          format: decimal
          description: 전송 금액
          example: 100.00
        chain:
          type: string
          enum: [TRON, ETH]
          description: 블록체인 네트워크
        memo:
          type: string
          description: 메모 (선택)
          maxLength: 255

    TransferResponse:
      type: object
      properties:
        transferId:
          type: string
          description: 전송 고유 ID
        transferType:
          type: string
          enum: [INTERNAL, EXTERNAL]
          description: 전송 유형
        transactionType:
          type: string
          enum: [WITHDRAW, TOKEN_DEPOSIT, PAYMENT_DEPOSIT, SWAP, EXCHANGE]
          description: 거래 유형
        orderNumber:
          type: string
          description: 주문번호
        senderId:
          type: integer
          format: int64
        receiverId:
          type: integer
          format: int64
        toAddress:
          type: string
          description: 외부 전송 시 수신 지갑 주소
        senderAddress:
          type: string
          description: 입금 시 송신 지갑 주소
        currencyCode:
          type: string
        fromCurrencyCode:
          type: string
          description: 스왑/환전 시 FROM 토큰
        toCurrencyCode:
          type: string
          description: 스왑/환전 시 TO 토큰
        amount:
          type: number
          format: decimal
        fromAmount:
          type: number
          format: decimal
          description: 스왑/환전 시 FROM 금액
        toAmount:
          type: number
          format: decimal
          description: 스왑/환전 시 TO 금액
        fee:
          type: number
          format: decimal
        networkFee:
          type: number
          format: decimal
          description: 외부 전송 시 네트워크 수수료
        network:
          type: string
          description: 네트워크 (Ether, TRON 등)
        depositMethod:
          type: string
          enum: [CARD, BANK_TRANSFER, PAY]
          description: 입금 방법 (결제 입금 시)
        paymentAmount:
          type: number
          format: decimal
          description: 결제금액 (결제 입금 시)
        status:
          type: string
          enum: [PENDING, COMPLETED, FAILED, CANCELLED, CONFIRMED, SUBMITTED]
        memo:
          type: string
        createdAt:
          type: string
          format: date-time

    TransferHistory:
      type: object
      properties:
        transfers:
          type: array
          items:
            $ref: '#/components/schemas/TransferResponse'
        total:
          type: integer
        limit:
          type: integer
        offset:
          type: integer

    # Swap 관련 스키마
    SwapRequest:
      type: object
      required:
        - fromCurrencyCode
        - toCurrencyCode
        - fromAmount
        - network
      properties:
        fromCurrencyCode:
          type: string
          description: FROM 통화 코드
          example: ETH
        toCurrencyCode:
          type: string
          description: TO 통화 코드
          example: USDT
        fromAmount:
          type: number
          format: decimal
          description: FROM 금액
          example: 1.0
        network:
          type: string
          description: 네트워크
          example: Ether

    SwapResponse:
      type: object
      properties:
        swapId:
          type: string
          description: 스왑 고유 ID
        orderNumber:
          type: string
          description: 주문번호
        fromCurrencyCode:
          type: string
        toCurrencyCode:
          type: string
        fromAmount:
          type: number
          format: decimal
        toAmount:
          type: number
          format: decimal
        network:
          type: string
        status:
          type: string
          enum: [PENDING, COMPLETED, FAILED]
        createdAt:
          type: string
          format: date-time

    # Exchange 관련 스키마
    ExchangeRequest:
      type: object
      required:
        - fromAmount
      properties:
        fromAmount:
          type: number
          format: decimal
          description: FROM 금액 (KRWT)
          example: 100.0
          minimum: 1.0

    ExchangeResponse:
      type: object
      properties:
        exchangeId:
          type: string
          description: 환전 고유 ID
        orderNumber:
          type: string
          description: 주문번호
        fromCurrencyCode:
          type: string
          example: KRWT
        toCurrencyCode:
          type: string
          example: BLUEDIA
        fromAmount:
          type: number
          format: decimal
        toAmount:
          type: number
          format: decimal
        status:
          type: string
          enum: [PENDING, COMPLETED, FAILED]
        createdAt:
          type: string
          format: date-time

    # Payment Deposit 관련 스키마
    PaymentDepositRequest:
      type: object
      required:
        - currencyCode
        - amount
        - depositMethod
        - paymentAmount
      properties:
        currencyCode:
          type: string
          description: 통화 코드
          example: KRWT
        amount:
          type: number
          format: decimal
          description: 입금할 코인 양
          example: 1000.0
        depositMethod:
          type: string
          enum: [CARD, BANK_TRANSFER, PAY]
          description: 입금 방법
          example: CARD
        paymentAmount:
          type: number
          format: decimal
          description: 결제 금액 (원화 등)
          example: 100000.0

    PaymentDepositResponse:
      type: object
      properties:
        depositId:
          type: string
          description: 결제 입금 고유 ID
        orderNumber:
          type: string
          description: 주문번호
        currencyCode:
          type: string
        amount:
          type: number
          format: decimal
        depositMethod:
          type: string
          enum: [CARD, BANK_TRANSFER, PAY]
        paymentAmount:
          type: number
          format: decimal
        status:
          type: string
          enum: [PENDING, COMPLETED, FAILED]
        createdAt:
          type: string
          format: date-time

    # Token Deposit 관련 스키마
    TokenDepositListResponse:
      type: object
      properties:
        deposits:
          type: array
          items:
            $ref: '#/components/schemas/TokenDepositInfo'
        total:
          type: integer
        limit:
          type: integer
        offset:
          type: integer

    TokenDepositInfo:
      type: object
      properties:
        depositId:
          type: string
          description: 토큰 입금 고유 ID
        orderNumber:
          type: string
          description: 주문번호
        currencyCode:
          type: string
        amount:
          type: number
          format: decimal
        network:
          type: string
        senderAddress:
          type: string
          description: 송신 지갑 주소
        status:
          type: string
          enum: [PENDING, CONFIRMED, FAILED]
        createdAt:
          type: string
          format: date-time

    # Bonus 관련 스키마
    BonusEfficiencyResponse:
      type: object
      properties:
        totalEfficiency:
          type: integer
          description: 총 보너스 효율
        bonuses:
          type: array
          items:
            $ref: '#/components/schemas/BonusInfo'

    BonusInfo:
      type: object
      properties:
        type:
          type: string
          enum: [SOCIAL_LINK, PHONE_VERIFICATION, AD_WATCH, REFERRAL, PREMIUM_SUBSCRIPTION, REVIEW, AGENCY, REFERRAL_CODE_INPUT]
        name:
          type: string
        efficiency:
          type: integer
        isActive:
          type: boolean
        isPermanent:
          type: boolean
        expiresAt:
          type: string
          format: date-time
          nullable: true
        currentCount:
          type: integer
          nullable: true
        maxCount:
          type: integer
          nullable: true

    # Mining 관련 스키마
    DailyLimitResponse:
      type: object
      properties:
        currentLevel:
          type: integer
        dailyMaxMining:
          type: number
          format: decimal
        todayMiningAmount:
          type: number
          format: decimal
        resetAt:
          type: string
          format: date-time
        isLimitReached:
          type: boolean

    LevelInfoResponse:
      type: object
      properties:
        levels:
          type: array
          items:
            $ref: '#/components/schemas/MiningLevelInfo'

    MiningLevelInfo:
      type: object
      properties:
        level:
          type: integer
        dailyMaxMining:
          type: number
          format: decimal

    MiningHistoryResponse:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/MiningHistoryItem'
        total:
          type: integer
          format: int64
          description: 전체 개수
        totalAmount:
          type: number
          format: decimal
          description: 해당 기간의 총 체굴량 합계
        limit:
          type: integer
          description: 조회 개수
        offset:
          type: integer
          description: 시작 위치

    MiningHistoryItem:
      type: object
      properties:
        id:
          type: integer
          format: int64
        level:
          type: integer
          description: 채굴 당시 레벨
        nickname:
          type: string
          description: 사용자 닉네임
        amount:
          type: number
          format: decimal
          description: 채굴량
        type:
          type: string
          enum: [BROADCAST_PROGRESS, BROADCAST_WATCH]
          description: 채굴 유형 (BROADCAST_PROGRESS: 방송진행, BROADCAST_WATCH: 방송시청)
        status:
          type: string
          enum: [COMPLETED, FAILED, CANCELLED]
          description: 상태
        createdAt:
          type: string
          format: date-time
          description: 생성 시간

    # Level 관련 스키마
    UserLevelResponse:
      type: object
      properties:
        currentLevel:
          type: integer
        currentExp:
          type: number
          format: decimal
        nextLevelExp:
          type: number
          format: decimal
        progress:
          type: number
          format: double
          description: 진행률 (0.0 ~ 1.0)

    LevelGuideResponse:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        levels:
          type: array
          items:
            $ref: '#/components/schemas/LevelGuideInfo'

    LevelGuideInfo:
      type: object
      properties:
        level:
          type: integer
        requiredExp:
          type: number
          format: decimal
        benefits:
          type: array
          items:
            type: string

    # Notice 관련 스키마
    NoticeListResponse:
      type: object
      properties:
        notices:
          type: array
          items:
            $ref: '#/components/schemas/NoticeInfo'
        total:
          type: integer
        limit:
          type: integer
        offset:
          type: integer

    NoticeInfo:
      type: object
      properties:
        id:
          type: integer
          format: int64
        title:
          type: string
        content:
          type: string
        createdAt:
          type: string
          format: date-time
        isImportant:
          type: boolean

    Notice:
      type: object
      properties:
        id:
          type: integer
          format: int64
        title:
          type: string
        content:
          type: string
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
        isImportant:
          type: boolean

    # Subscription 관련 스키마
    SubscriptionStatusResponse:
      type: object
      properties:
        isSubscribed:
          type: boolean
        expiresAt:
          type: string
          format: date-time
          nullable: true
        packageType:
          type: string
          nullable: true

    SubscriptionRequest:
      type: object
      required:
        - packageType
      properties:
        packageType:
          type: string
        months:
          type: integer
          description: 구독 기간 (개월), null이면 무제한

    # Review 관련 스키마
    ReviewStatusResponse:
      type: object
      properties:
        hasWrittenReview:
          type: boolean
        reviewedAt:
          type: string
          format: date-time
          nullable: true

    ReviewWriteRequest:
      type: object
      required:
        - platform
      properties:
        platform:
          type: string
          enum: [GOOGLE_PLAY, APP_STORE]
        reviewId:
          type: string
          description: 리뷰 ID (플랫폼별)

    # Agency 관련 스키마
    AgencyStatusResponse:
      type: object
      properties:
        isJoined:
          type: boolean
        joinedAt:
          type: string
          format: date-time
          nullable: true
        agencyId:
          type: string
          nullable: true

    # Auth 확장 스키마
    LinkSocialRequest:
      type: object
      required:
        - provider
        - token
      properties:
        provider:
          type: string
          enum: [KAKAO, GOOGLE, EMAIL]
        token:
          type: string
          description: 소셜 토큰 또는 이메일 주소

    VerifyPhoneRequest:
      type: object
      required:
        - phoneNumber
        - verificationCode
      properties:
        phoneNumber:
          type: string
          pattern: '^01[0-9]-?[0-9]{3,4}-?[0-9]{4}$'
        verificationCode:
          type: string
          minLength: 4
          maxLength: 10

    # User 확장 스키마
    ReferralCodeResponse:
      type: object
      properties:
        referralCode:
          type: string
        referralLink:
          type: string
          format: uri

    # Ranking 관련 스키마
    CountryRankingResponse:
      type: object
      properties:
        top3:
          type: array
          items:
            $ref: '#/components/schemas/CountryRankingInfo'
        rankings:
          type: array
          items:
            $ref: '#/components/schemas/CountryRankingInfo'
        myCountry:
          $ref: '#/components/schemas/CountryRankingInfo'
          nullable: true
        totalCount:
          type: integer

    CountryRankingInfo:
      type: object
      properties:
        rank:
          type: integer
        country:
          type: string
        countryName:
          type: string
        flag:
          type: string
        totalMinedCoins:
          type: number
          format: decimal
        totalMembers:
          type: integer
          format: int64
        aggregation:
          type: number
          format: decimal

    RankingResponse:
      type: object
      properties:
        top3:
          type: array
          items:
            $ref: '#/components/schemas/RankingInfo'
        rankings:
          type: array
          items:
            $ref: '#/components/schemas/RankingInfo'
        myRank:
          $ref: '#/components/schemas/RankingInfo'
          nullable: true
        totalCount:
          type: integer
        aggregation:
          $ref: '#/components/schemas/AggregationInfo'

    RankingInfo:
      type: object
      properties:
        userId:
          type: integer
          format: int64
        rank:
          type: integer
        nickname:
          type: string
        profileImage:
          type: string
          nullable: true
        level:
          type: integer
        levelName:
          type: string
        totalAmount:
          type: number
          format: decimal
          description: 체굴된 전체 코인 + 레퍼럴 수익
        teamCount:
          type: integer
          format: int64
          description: 팀원 수
        country:
          type: string
        flag:
          type: string

    AggregationInfo:
      type: object
      properties:
        formula:
          type: string
          description: 집계 공식
        calculation:
          type: number
          format: decimal
          description: 집계 계산 결과
      properties:
        rank:
          type: integer
        country:
          type: string
        countryName:
          type: string
        flag:
          type: string
        totalMinedCoins:
          type: number
          format: decimal
        totalMembers:
          type: integer
          format: int64
        aggregation:
          type: number
          format: decimal

    # Referral Team 관련 스키마
    TeamInfoResponse:
      type: object
      properties:
        summary:
          $ref: '#/components/schemas/TeamSummaryInfo'
        members:
          type: array
          items:
            $ref: '#/components/schemas/TeamMemberInfo'
          nullable: true
          description: tab이 MEMBERS일 때 반환
        revenues:
          type: array
          items:
            $ref: '#/components/schemas/TeamRevenueInfo'
          nullable: true
          description: tab이 REVENUE일 때 반환
        total:
          type: integer
          format: int64
          description: 전체 개수
        limit:
          type: integer
          description: 조회 개수
        offset:
          type: integer
          description: 시작 위치

    TeamSummaryInfo:
      type: object
      properties:
        totalRevenue:
          type: number
          format: decimal
          description: 팀의 체굴된 총 수익 (래퍼럴 수익)
        todayRevenue:
          type: number
          format: decimal
          description: 팀의 금일 채굴된 총 수익
        totalMembers:
          type: integer
          format: int64
          description: 추천인으로 등록한 총 인원
        newMembersToday:
          type: integer
          format: int64
          description: 금일 추천인 등록한 신규 인원

    TeamMemberInfo:
      type: object
      properties:
        userId:
          type: integer
          format: int64
        level:
          type: integer
        nickname:
          type: string
        registeredAt:
          type: string
          format: date-time
          description: 등록일시

    TeamRevenueInfo:
      type: object
      properties:
        userId:
          type: integer
          format: int64
        level:
          type: integer
        nickname:
          type: string
        date:
          type: string
          format: date-time
          nullable: true
          description: 수익 발생일
        todayRevenue:
          type: number
          format: decimal
          description: 금일 수익
        totalRevenue:
          type: number
          format: decimal
          description: 총 수익

    # Banner 관련 스키마
    BannerListResponse:
      type: object
      properties:
        banners:
          type: array
          items:
            $ref: '#/components/schemas/BannerInfo'

    BannerInfo:
      type: object
      properties:
        id:
          type: integer
          format: int64
        title:
          type: string
        imageUrl:
          type: string
          format: uri
        linkUrl:
          type: string
          format: uri
          nullable: true
        position:
          type: string
          enum: [RANKING_TOP, DASHBOARD_TOP]
        isActive:
          type: boolean
        startDate:
          type: string
          format: date-time
        endDate:
          type: string
          format: date-time

paths:
  # ==================== System ====================
  /health:
    get:
      summary: Health Check
      description: 서버 상태 확인
      tags: [System]
      responses:
        '200':
          description: 서버 상태 정상
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: UP
                  timestamp:
                    type: integer
                    format: int64

  # ==================== Auth ====================
  /api/v1/auth/register:
    post:
      summary: 회원가입
      description: 새로운 사용자 계정을 생성합니다.
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - loginId
                - password
              properties:
                loginId:
                  type: string
                  minLength: 3
                  maxLength: 50
                  example: testuser
                password:
                  type: string
                  minLength: 8
                  maxLength: 20
                  description: 영문, 숫자, 특수문자 포함
                  example: Test1234!@
                referralCode:
                  type: string
                  minLength: 6
                  maxLength: 20
                  description: 추천인 코드 (선택)
                  example: ABC123
      responses:
        '200':
          description: 회원가입 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          accessToken:
                            type: string
                          refreshToken:
                            type: string
                          userId:
                            type: integer
                          loginId:
                            type: string
        '400':
          description: 잘못된 요청 (이미 존재하는 아이디, 유효하지 않은 비밀번호 형식 등)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/v1/auth/login:
    post:
      summary: 로그인
      description: 사용자 인증 및 JWT 토큰 발급
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - loginId
                - password
              properties:
                loginId:
                  type: string
                  example: testuser
                password:
                  type: string
                  example: Test1234!@
      responses:
        '200':
          description: 로그인 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          accessToken:
                            type: string
                          refreshToken:
                            type: string
                          userId:
                            type: integer
                          loginId:
                            type: string
        '401':
          description: 인증 실패 (잘못된 아이디 또는 비밀번호)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/v1/auth/access-token:
    get:
      summary: Access Token 재발급
      description: Refresh Token을 사용하여 새로운 Access Token 발급
      tags: [Auth]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 토큰 재발급 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          accessToken:
                            type: string
                          userId:
                            type: integer
        '401':
          description: 인증 실패

  /api/v1/auth/refresh-token:
    get:
      summary: Refresh Token 재발급
      description: 새로운 Refresh Token 발급
      tags: [Auth]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 토큰 재발급 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          refreshToken:
                            type: string
                          userId:
                            type: integer
        '401':
          description: 인증 실패

  /api/v1/auth/api-key:
    post:
      summary: API Key 생성
      description: 외부 서비스 연동을 위한 API Key 생성
      tags: [Auth]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  minLength: 1
                  maxLength: 100
                  description: API Key 이름
                  example: My Trading Bot
                description:
                  type: string
                  maxLength: 255
                  description: API Key 설명 (선택)
                  example: 자동 거래 봇용 API Key
      responses:
        '200':
          description: API Key 생성 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          apiKey:
                            type: string
                          name:
                            type: string
                          createdAt:
                            type: string
                            format: date-time
        '400':
          description: 잘못된 요청

  /api/v1/auth/api-key/reissue:
    get:
      summary: API Key 재발급
      description: 기존 API Key를 무효화하고 새로운 API Key 발급
      tags: [Auth]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: API Key 재발급 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          apiKey:
                            type: string
                          createdAt:
                            type: string
                            format: date-time
        '401':
          description: 인증 실패

  /api/v1/auth/logout:
    post:
      summary: 로그아웃
      description: 현재 세션 종료 및 토큰 무효화
      tags: [Auth]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 로그아웃 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '401':
          description: 인증 실패

  /api/v1/auth/link-social:
    post:
      summary: 소셜 계정 연동
      description: 카카오, 구글, 이메일 계정을 연동합니다.
      tags: [Auth]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LinkSocialRequest'
      responses:
        '200':
          description: 연동 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: boolean
        '400':
          description: 잘못된 요청
        '401':
          description: 인증 실패

  /api/v1/auth/verify-phone:
    post:
      summary: 본인인증(휴대폰) 등록
      description: 휴대폰 번호를 인증하여 등록합니다.
      tags: [Auth]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyPhoneRequest'
      responses:
        '200':
          description: 인증 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: boolean
        '400':
          description: 잘못된 요청 (인증 코드 불일치 등)
        '401':
          description: 인증 실패

  # ==================== User ====================
  /api/v1/users/{id}:
    get:
      summary: 사용자 정보 조회
      description: 특정 사용자의 정보를 조회합니다.
      tags: [User]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 사용자 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/User'
        '401':
          description: 인증 실패
        '403':
          description: 권한 없음
        '404':
          description: 사용자를 찾을 수 없음

  /api/v1/users/generate/referral-code:
    post:
      summary: 레퍼럴 코드 생성 (본인)
      description: 로그인한 사용자 본인의 레퍼럴 코드를 생성합니다.
      tags: [User]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 생성 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          referralCode:
                            type: string
                            example: ABC123
                          userId:
                            type: integer
        '400':
          description: 이미 레퍼럴 코드가 존재함
        '401':
          description: 인증 실패

  /api/v1/users/{id}/generate/referral-code:
    post:
      summary: 레퍼럴 코드 생성 (ADMIN이 특정 유저에게)
      description: ADMIN 권한으로 특정 사용자의 레퍼럴 코드를 생성합니다.
      tags: [User]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 대상 사용자 ID
      responses:
        '200':
          description: 생성 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          referralCode:
                            type: string
                          referralLink:
                            type: string
                            format: uri
        '400':
          description: 이미 레퍼럴 코드가 존재함
        '401':
          description: 인증 실패
        '403':
          description: 권한 없음 (ADMIN만 가능)
        '404':
          description: 사용자를 찾을 수 없음

  /api/v1/users/referral-code:
    get:
      summary: 추천인 코드 조회
      description: 로그인한 사용자의 추천인 코드와 추천 링크를 조회합니다.
      tags: [User]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ReferralCodeResponse'
        '400':
          description: 레퍼럴 코드가 없음
        '401':
          description: 인증 실패

  # ==================== Referral ====================
  /api/v1/referrals/register:
    post:
      summary: 레퍼럴 코드 등록
      description: 로그인한 유저가 다른 유저의 추천인 코드를 입력하여 피추천인이 됩니다.
      tags: [Referral]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - referralCode
              properties:
                referralCode:
                  type: string
                  minLength: 6
                  maxLength: 20
                  description: 추천인의 레퍼럴 코드
                  example: REFER123
      responses:
        '200':
          description: 등록 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          referrerId:
                            type: integer
                            description: 추천인 ID
                          referredId:
                            type: integer
                            description: 피추천인 ID (본인)
                          status:
                            type: string
        '400':
          description: 잘못된 요청 (이미 등록됨, 유효하지 않은 코드, 자신의 코드)
        '401':
          description: 인증 실패

  /api/v1/referrals/:
    delete:
      summary: 레퍼럴 관계 삭제 (Soft Delete)
      description: deleted_at을 현재 시간으로 업데이트합니다. 데이터는 보존됩니다.
      tags: [Referral]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 삭제 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: 등록된 레퍼럴 관계가 없음
        '401':
          description: 인증 실패

  /api/v1/referrals/hard:
    delete:
      summary: 레퍼럴 관계 완전 삭제 (Hard Delete)
      description: 데이터베이스에서 완전히 삭제합니다. 복구가 불가능합니다.
      tags: [Referral]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 삭제 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: 레퍼럴 관계가 존재하지 않음
        '401':
          description: 인증 실패

  /api/v1/referrals/{id}/stats:
    get:
      summary: 레퍼럴 통계 조회
      description: 특정 사용자의 레퍼럴 통계를 조회합니다.
      tags: [Referral]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: 사용자 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          userId:
                            type: integer
                          directCount:
                            type: integer
                            description: 직접 추천한 총 인원 (모든 상태 포함, 삭제되지 않은 것만)
                          activeTeamCount:
                            type: integer
                            description: ACTIVE 상태인 팀원 수 (삭제되지 않은 것만)
                          totalReward:
                            type: number
                            format: decimal
                            description: 총 리워드
                          todayReward:
                            type: number
                            format: decimal
                            description: 오늘 리워드 (미구현)
        '401':
          description: 인증 실패
        '404':
          description: 사용자를 찾을 수 없음

  /api/v1/referrals/team:
    get:
      summary: 팀 정보 조회
      description: 팀 통계 및 멤버/수익 목록을 조회합니다.
      tags: [Referral]
      security:
        - BearerAuth: []
      parameters:
        - name: tab
          in: query
          required: false
          schema:
            type: string
            enum: [MEMBERS, REVENUE]
            default: MEMBERS
          description: 탭 유형 (MEMBERS: 멤버 목록, REVENUE: 수익 목록)
        - name: period
          in: query
          required: false
          schema:
            type: string
            enum: [ALL, TODAY, WEEK, MONTH, YEAR]
            default: TODAY
          description: 기간 필터
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 20
          description: 조회 개수
        - name: offset
          in: query
          required: false
          schema:
            type: integer
            default: 0
          description: 시작 위치
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TeamInfoResponse'
        '401':
          description: 인증 실패

  # ==================== Wallet ====================
  /api/v1/wallets/my:
    get:
      summary: 내 지갑 목록 조회
      description: 로그인한 사용자의 모든 지갑 정보를 조회합니다.
      tags: [Wallet]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Wallet'
        '401':
          description: 인증 실패

  # ==================== Transfer ====================
  /api/v1/transfers/internal:
    post:
      summary: 내부 전송
      description: |
        시스템 내 다른 사용자에게 코인을 전송합니다.
        수신자는 지갑주소, 추천인코드, 또는 유저ID로 지정할 수 있습니다.
      tags: [Transfer]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InternalTransferRequest'
            examples:
              byAddress:
                summary: 지갑 주소로 전송
                value:
                  receiverType: ADDRESS
                  receiverValue: "TXYZabc123..."
                  currencyCode: FOXYA
                  amount: 100.00
                  memo: "친구에게 전송"
              byReferralCode:
                summary: 추천인 코드로 전송
                value:
                  receiverType: REFERRAL_CODE
                  receiverValue: "ABC123"
                  currencyCode: FOXYA
                  amount: 50.00
              byUserId:
                summary: 유저 ID로 전송
                value:
                  receiverType: USER_ID
                  receiverValue: "123"
                  currencyCode: FOXYA
                  amount: 25.00
      responses:
        '200':
          description: 전송 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TransferResponse'
        '400':
          description: 잘못된 요청 (잔액 부족, 유효하지 않은 수신자, 비활성 지갑 등)
        '401':
          description: 인증 실패
        '404':
          description: 수신자를 찾을 수 없음

  /api/v1/transfers/external:
    post:
      summary: 외부 전송 (출금)
      description: |
        외부 블록체인 지갑으로 코인을 출금합니다.
        TRON 또는 ETH 네트워크를 지원합니다.
        출금 요청은 별도의 Node.js 서비스에서 처리됩니다.
      tags: [Transfer]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExternalTransferRequest'
            example:
              toAddress: "TXYZabc123def456..."
              currencyCode: FOXYA
              amount: 100.00
              chain: TRON
              memo: "출금 요청"
      responses:
        '200':
          description: 출금 요청 접수됨 (PENDING 상태)
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TransferResponse'
        '400':
          description: 잘못된 요청 (잔액 부족, 유효하지 않은 주소, 비활성 지갑 등)
        '401':
          description: 인증 실패

  /api/v1/transfers/history:
    get:
      summary: 전송 내역 조회
      description: 로그인한 사용자의 전송 내역을 조회합니다.
      tags: [Transfer]
      security:
        - BearerAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: 조회할 개수
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
          description: 시작 위치
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TransferHistory'
        '401':
          description: 인증 실패

  /api/v1/transfers/{transferId}:
    get:
      summary: 전송 상세 조회
      description: 특정 전송 건의 상세 정보를 조회합니다.
      tags: [Transfer]
      security:
        - BearerAuth: []
      parameters:
        - name: transferId
          in: path
          required: true
          schema:
            type: string
          description: 전송 고유 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TransferResponse'
        '401':
          description: 인증 실패
        '404':
          description: 전송 내역을 찾을 수 없음

  # ==================== Swap ====================
  /api/v1/swap:
    post:
      summary: 스왑 실행
      description: |
        한 토큰을 다른 토큰으로 스왑합니다.
        예: ETH → USDT (Ether 네트워크)
      tags: [Transfer]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SwapRequest'
            example:
              fromCurrencyCode: ETH
              toCurrencyCode: USDT
              fromAmount: 1.0
              network: Ether
      responses:
        '200':
          description: 스왑 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/SwapResponse'
        '400':
          description: 잘못된 요청 (잔액 부족, 유효하지 않은 통화 등)
        '401':
          description: 인증 실패

  /api/v1/swap/{swapId}:
    get:
      summary: 스왑 상세 조회
      description: 특정 스왑 건의 상세 정보를 조회합니다.
      tags: [Transfer]
      security:
        - BearerAuth: []
      parameters:
        - name: swapId
          in: path
          required: true
          schema:
            type: string
          description: 스왑 고유 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/SwapResponse'
        '401':
          description: 인증 실패
        '404':
          description: 스왑 내역을 찾을 수 없음

  # ==================== Exchange ====================
  /api/v1/exchange:
    post:
      summary: 환전 실행
      description: |
        KRWT를 BLUEDIA로 환전합니다.
        환전 비율은 1 KRWT = 0.8 BLUEDIA 입니다.
      tags: [Transfer]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExchangeRequest'
            example:
              fromAmount: 100.0
      responses:
        '200':
          description: 환전 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ExchangeResponse'
        '400':
          description: 잘못된 요청 (잔액 부족, 최소 금액 미달 등)
        '401':
          description: 인증 실패

  /api/v1/exchange/{exchangeId}:
    get:
      summary: 환전 상세 조회
      description: 특정 환전 건의 상세 정보를 조회합니다.
      tags: [Transfer]
      security:
        - BearerAuth: []
      parameters:
        - name: exchangeId
          in: path
          required: true
          schema:
            type: string
          description: 환전 고유 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ExchangeResponse'
        '401':
          description: 인증 실패
        '404':
          description: 환전 내역을 찾을 수 없음

  # ==================== Payment Deposit ====================
  /api/v1/payment/deposit:
    post:
      summary: 결제 입금 요청
      description: |
        카드, 계좌이체, 간편결제 등을 통해 코인을 구매합니다.
      tags: [Transfer]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentDepositRequest'
            example:
              currencyCode: KRWT
              amount: 1000.0
              depositMethod: CARD
              paymentAmount: 100000.0
      responses:
        '200':
          description: 결제 입금 요청 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/PaymentDepositResponse'
        '400':
          description: 잘못된 요청
        '401':
          description: 인증 실패

  /api/v1/payment/deposit/{depositId}:
    get:
      summary: 결제 입금 상세 조회
      description: 특정 결제 입금 건의 상세 정보를 조회합니다.
      tags: [Transfer]
      security:
        - BearerAuth: []
      parameters:
        - name: depositId
          in: path
          required: true
          schema:
            type: string
          description: 결제 입금 고유 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/PaymentDepositResponse'
        '401':
          description: 인증 실패
        '404':
          description: 결제 입금 내역을 찾을 수 없음

  # ==================== Token Deposit ====================
  /api/v1/deposits:
    get:
      summary: 토큰 입금 목록 조회
      description: |
        외부 지갑에서 입금된 토큰 내역을 조회합니다.
        currencyCode로 필터링할 수 있습니다.
      tags: [Transfer]
      security:
        - BearerAuth: []
      parameters:
        - name: currencyCode
          in: query
          schema:
            type: string
          description: 통화 코드 (선택)
          example: FOXYA
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
          description: 조회할 개수
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
          description: 시작 위치
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/TokenDepositListResponse'
        '401':
          description: 인증 실패

  # ==================== Bonus ====================
  /api/v1/bonus/efficiency:
    get:
      summary: 보너스 채굴 효율 조회
      description: 사용자의 현재 보너스 채굴 효율 정보를 조회합니다.
      tags: [Bonus]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/BonusEfficiencyResponse'
        '401':
          description: 인증 실패

  # ==================== Mining ====================
  /api/v1/mining/daily-limit:
    get:
      summary: 일일 최대 채굴량 조회
      description: 일일 최대 채굴량 및 현재 채굴량을 조회합니다.
      tags: [Mining]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/DailyLimitResponse'
        '401':
          description: 인증 실패

  /api/v1/mining/level-info:
    get:
      summary: 레벨별 일일 최대 채굴량 정보
      description: 레벨별 일일 최대 채굴량 정보를 조회합니다.
      tags: [Mining]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/LevelInfoResponse'
        '401':
          description: 인증 실패

  /api/v1/mining/history:
    get:
      summary: 체굴 내역 조회
      description: |
        체굴 내역을 조회합니다. 래퍼럴 수익은 제외하고 체굴 내역만 조회됩니다.
        
        **period 파라미터:**
        - ALL: 전체
        - TODAY: 오늘
        - WEEK: 최근 7일
        - MONTH: 최근 30일
        - YEAR: 최근 1년
        
        **type:**
        - BROADCAST_PROGRESS: 방송진행
        - BROADCAST_WATCH: 방송시청
      tags: [Mining]
      security:
        - BearerAuth: []
      parameters:
        - name: period
          in: query
          description: 기간 (ALL, TODAY, WEEK, MONTH, YEAR)
          schema:
            type: string
            enum: [ALL, TODAY, WEEK, MONTH, YEAR]
            default: TODAY
        - name: limit
          in: query
          description: 조회 개수
          schema:
            type: integer
            default: 20
        - name: offset
          in: query
          description: 시작 위치
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/MiningHistoryResponse'
              example:
                status: OK
                message: 요청이 완료되었습니다.
                data:
                  items:
                    - id: 1
                      level: 1
                      nickname: testuser
                      amount: 0.00012345
                      type: BROADCAST_PROGRESS
                      status: COMPLETED
                      createdAt: "2025-10-26T18:46:00Z"
                    - id: 2
                      level: 1
                      nickname: testuser
                      amount: 0.00012345
                      type: BROADCAST_WATCH
                      status: COMPLETED
                      createdAt: "2025-10-26T18:30:00Z"
                  total: 100
                  totalAmount: 1.23456789
                  limit: 20
                  offset: 0
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: 사용자를 찾을 수 없습니다.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ==================== Level ====================
  /api/v1/user/level:
    get:
      summary: 사용자 레벨 및 경험치 정보
      description: 사용자의 현재 레벨 및 경험치 정보를 조회합니다.
      tags: [Level]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/UserLevelResponse'
        '401':
          description: 인증 실패

  /api/v1/user/level-guide:
    get:
      summary: 레벨 가이드 정보
      description: 레벨 가이드 정보를 조회합니다.
      tags: [Level]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/LevelGuideResponse'
        '401':
          description: 인증 실패

  # ==================== Ranking ====================
  /api/v1/ranking:
    get:
      summary: 개인 랭킹 조회
      description: |
        개인 랭킹을 조회합니다. 지역별 또는 세계별로 조회할 수 있습니다.
        
        **scope 파라미터:**
        - REGIONAL: 지역별 (같은 국가)
        - GLOBAL: 세계별 (전체)
        
        **period 파라미터:**
        - ALL: 전체
        - TODAY: 오늘
        - WEEK: 최근 7일
        - MONTH: 최근 30일
        - YEAR: 최근 1년
        
        **totalAmount:**
        - 체굴된 전체 코인 + 레퍼럴 수익 (입금 제외, 출금 차감 안함)
        
        **aggregation.calculation:**
        - totalAmount + (teamCount * 20)
      tags: [Ranking]
      security:
        - BearerAuth: []
      parameters:
        - name: scope
          in: query
          description: 범위 (REGIONAL, GLOBAL)
          schema:
            type: string
            enum: [REGIONAL, GLOBAL]
            default: REGIONAL
        - name: period
          in: query
          description: 기간 (ALL, TODAY, WEEK, MONTH, YEAR)
          schema:
            type: string
            enum: [ALL, TODAY, WEEK, MONTH, YEAR]
            default: TODAY
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/RankingResponse'
              example:
                status: OK
                message: 요청이 완료되었습니다.
                data:
                  top3:
                    - userId: 1
                      rank: 1
                      nickname: User1
                      profileImage: null
                      level: 9
                      levelName: 영우야
                      totalAmount: 50000.12345
                      teamCount: 2000
                      country: KR
                      flag: 🇰🇷
                    - userId: 2
                      rank: 2
                      nickname: User2
                      profileImage: null
                      level: 8
                      levelName: 영우야
                      totalAmount: 45000.54321
                      teamCount: 1800
                      country: US
                      flag: 🇺🇸
                    - userId: 3
                      rank: 3
                      nickname: User3
                      profileImage: null
                      level: 7
                      levelName: 영우야
                      totalAmount: 40000.98765
                      teamCount: 1500
                      country: JP
                      flag: 🇯🇵
                  rankings:
                    - userId: 4
                      rank: 4
                      nickname: User4
                      profileImage: null
                      level: 6
                      levelName: 영우야
                      totalAmount: 35000.12345
                      teamCount: 1200
                      country: CN
                      flag: 🇨🇳
                  myRank:
                    userId: 100
                    rank: 25
                    nickname: 나
                    profileImage: null
                    level: 5
                    levelName: 영우야
                    totalAmount: 15000.12345
                    teamCount: 1026
                    country: KR
                    flag: 🇰🇷
                  totalCount: 50
                  aggregation:
                    formula: "(체굴된 코인+래퍼럴 수익)+(팀원1x20코인)"
                    calculation: 35520.12345
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: 사용자를 찾을 수 없습니다.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /api/v1/ranking/country:
    get:
      summary: 국가별 팀 랭킹 조회
      description: 국가별 팀 랭킹을 조회합니다.
      tags: [Ranking]
      security:
        - BearerAuth: []
      parameters:
        - name: period
          in: query
          description: 기간 (ALL, TODAY, WEEK, MONTH, YEAR)
          schema:
            type: string
            enum: [ALL, TODAY, WEEK, MONTH, YEAR]
            default: TODAY
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CountryRankingResponse'
        '401':
          description: 인증 실패
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  # ==================== Notice ====================
  /api/v1/notices:
    get:
      summary: 공지사항 목록 조회
      description: 공지사항 목록을 조회합니다.
      tags: [Notice]
      security:
        - BearerAuth: []
      parameters:
        - name: limit
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: 조회할 개수
        - name: offset
          in: query
          schema:
            type: integer
            minimum: 0
            default: 0
          description: 시작 위치
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/NoticeListResponse'
        '401':
          description: 인증 실패

  /api/v1/notices/{id}:
    get:
      summary: 공지사항 상세 조회
      description: 특정 공지사항의 상세 정보를 조회합니다.
      tags: [Notice]
      security:
        - BearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
          description: 공지사항 ID
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notice'
        '401':
          description: 인증 실패
        '404':
          description: 공지사항을 찾을 수 없음

  # ==================== Subscription ====================
  /api/v1/subscription/status:
    get:
      summary: 프리미엄 구독 상태 조회
      description: 프리미엄 구독 상태를 조회합니다.
      tags: [Subscription]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/SubscriptionStatusResponse'
        '401':
          description: 인증 실패

  /api/v1/subscription/subscribe:
    post:
      summary: 프리미엄 패키지 구독
      description: 프리미엄 패키지를 구독합니다.
      tags: [Subscription]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionRequest'
      responses:
        '200':
          description: 구독 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id:
                            type: integer
                            format: int64
                          packageType:
                            type: string
                          isActive:
                            type: boolean
                          expiresAt:
                            type: string
                            format: date-time
                            nullable: true
        '400':
          description: 잘못된 요청
        '401':
          description: 인증 실패

  # ==================== Review ====================
  /api/v1/review/status:
    get:
      summary: 리뷰 작성 여부 조회
      description: 리뷰 작성 여부를 조회합니다.
      tags: [Review]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/ReviewStatusResponse'
        '401':
          description: 인증 실패

  /api/v1/review/write:
    post:
      summary: 리뷰 작성
      description: 리뷰를 작성합니다.
      tags: [Review]
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReviewWriteRequest'
      responses:
        '200':
          description: 작성 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          id:
                            type: integer
                            format: int64
                          platform:
                            type: string
                          reviewedAt:
                            type: string
                            format: date-time
        '400':
          description: 잘못된 요청
        '401':
          description: 인증 실패

  # ==================== Agency ====================
  /api/v1/agency/status:
    get:
      summary: 에이전시 가입 상태 조회
      description: 에이전시 가입 상태를 조회합니다.
      tags: [Agency]
      security:
        - BearerAuth: []
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/ApiResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/AgencyStatusResponse'
        '401':
          description: 인증 실패
  /api/v1/banners/{id}/click:
